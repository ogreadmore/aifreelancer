<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Delivery Playbook — Sales & CRM Automation | AI Freelancer</title>
  <meta name="description" content="Tiered delivery process for Sales & CRM Automation: Core, Enhanced, Enterprise. Includes best practices, tooling, SOPs, checklists, KPIs, security, and templates." />
  <link rel="preconnect" href="https://cdn.tailwindcss.com" crossorigin>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800;900&display=swap" rel="stylesheet">
  <style> body{font-family:'Inter',sans-serif; line-height:1.5} .sec{scroll-margin-top:80px} </style>
  <style>
    html { scroll-behavior: smooth; }
    :root{ --teal:#0d9488; --indigo:#4f46e5; --muted:#6b7280; --text:#0f172a; }
    body{ background: linear-gradient(180deg, rgba(79,70,229,0.04) 0%, rgba(13,148,136,0.02) 60%), #fff; color:var(--text); }
    .bg-white.border.rounded-xl, .bg-white.border.rounded-2xl{ position:relative; background:linear-gradient(180deg,#ffffff 0%,#fbfdff 100%); border:1px solid rgba(79,70,229,0.06); box-shadow:0 10px 30px rgba(15,23,42,0.06); transition:transform .16s cubic-bezier(.2,.9,.3,1), box-shadow .16s; }
    .bg-white.border.rounded-xl:hover, .bg-white.border.rounded-2xl:hover{ transform:translateY(-6px); box-shadow:0 26px 60px rgba(15,23,42,0.12); }
    h1{ color:var(--indigo); font-weight:900; font-size:2.4rem; }
    h2{ color:#061126; font-weight:800; }
    a{ color:var(--indigo); } a:hover{ color:#3730a3; text-decoration:underline; }
    .kpi-grid>div{ padding-left:18px; overflow:hidden; }
    .kpi-grid>div::before{ content:''; position:absolute; left:0; top:12px; bottom:12px; width:6px; border-radius:6px; background:linear-gradient(180deg,var(--teal),var(--indigo)); }
    table.min-w-full thead th{ position:sticky; top:0; background:linear-gradient(180deg,#fbfdff,#f8fafc); color:var(--muted); font-weight:800; padding:12px 16px; z-index:2; }
    table.min-w-full td{ padding:12px 16px; border-top:1px solid rgba(15,23,42,0.03); }
    details summary{ cursor:pointer; } details[open] summary{ color:var(--indigo); }
    code,kbd{ background:#f1f5f9; border:1px solid #e6eef8; border-radius:.375rem; padding:.125rem .375rem; }
    #toc a.active { color: var(--indigo); font-weight:800; text-decoration:underline; }
  </style>
  <meta name="robots" content="noindex, follow" />
</head>
<body class="bg-gray-50 text-gray-900">
  <header class="bg-white border-b border-gray-200">
    <div class="container mx-auto px-6 py-4 flex items-center justify-between">
      <a href="/" class="text-xl font-extrabold"><span class="text-indigo-600">AI</span> Freelancer</a>
      <nav class="text-sm text-gray-600">
        <a href="index.html" class="hover:text-gray-900">Playbook index</a>
        <span class="mx-3">•</span>
        <a href="/sales-crm-automation.html" class="hover:text-gray-900">Service page</a>
      </nav>
    </div>
  </header>

  <main class="container mx-auto px-6 py-10 space-y-12">
    <section class="sec" id="overview">
      <h1 class="text-3xl md:text-5xl font-extrabold tracking-tight">🧩 Delivery Playbook: Sales & CRM Automation</h1>
      <p class="mt-4 text-lg text-gray-700">Automate lead capture, routing, outreach, and CRM hygiene. Three tiers—Core, Enhanced, Enterprise—aligned to your stack and risk profile, with sandboxes, safe rollouts, and measurable outcomes.</p>
      <div class="mt-6 grid md:grid-cols-3 gap-4 kpi-grid">
        <div class="bg-white border rounded-xl p-4"><p class="text-sm text-gray-500">Primary KPI</p><p class="text-xl font-bold">Speed‑to‑Lead ≤ 2 min</p></div>
        <div class="bg-white border rounded-xl p-4"><p class="text-sm text-gray-500">Quality KPI</p><p class="text-xl font-bold">≥ 95% Activity Logging</p></div>
        <div class="bg-white border rounded-xl p-4"><p class="text-sm text-gray-500">Outcome</p><p class="text-xl font-bold">+10–25% SQL→Opp Lift</p></div>
      </div>
    </section>

    

    <div class="grid md:grid-cols-12 gap-8 items-start">
      <aside id="toc" class="hidden md:block md:col-span-3 md:self-start md:sticky md:top-5">
        <nav class="bg-white border rounded-xl p-4 md:h-[calc(100vh-40px)] md:max-h-none md:overflow-auto text-sm">
          <p class="text-xs font-semibold uppercase text-gray-500 mb-2">On this page</p>
          <ul class="space-y-2">
            <li><a class="hover:text-indigo-600" href="#tier-overview">Tier Overview</a></li>
          </ul>
          <details class="mt-4" open>
            <summary class="font-semibold cursor-pointer">Core Tier</summary>
            <ol class="ml-4 mt-2 space-y-1 list-decimal">
              <li><a href="#core-story" class="hover:text-indigo-600">Quick Story</a></li>
              <li><a href="#core-communication" class="hover:text-indigo-600">Communication</a></li>
              <li><a href="#core-simple-checklist" class="hover:text-indigo-600">Checklist</a></li>
              <li><a href="#core-phases" class="hover:text-indigo-600">Phases</a></li>
              <li><a href="#core-scope" class="hover:text-indigo-600">Scope & Inclusions</a></li>
              <li><a href="#core-kpis" class="hover:text-indigo-600">KPIs</a></li>
              <li><a href="#core-glossary" class="hover:text-indigo-600">Glossary</a></li>
              <li><a href="#core-initial-setup" class="hover:text-indigo-600">Initial Setup</a></li>
              <li><a href="#core-prereqs" class="hover:text-indigo-600">Access & Prereqs</a></li>
              <li><a href="#core-tooling" class="hover:text-indigo-600">Tooling</a></li>
              <li><a href="#core-design" class="hover:text-indigo-600">Design</a></li>
              <li><a href="#core-security" class="hover:text-indigo-600">Security</a></li>
              <li><a href="#core-timeline" class="hover:text-indigo-600">Timeline</a></li>
              <li><a href="#core-templates" class="hover:text-indigo-600">Templates</a></li>
              <li><a href="#core-audit-monitoring" class="hover:text-indigo-600">Audit & Monitoring</a></li>
            </ol>
          </details>
          <details class="mt-4">
            <summary class="font-semibold cursor-pointer">Enhanced Tier</summary>
            <ol class="ml-4 mt-2 space-y-1 list-decimal">
              <li><a href="#enhanced-story" class="hover:text-indigo-600">Quick Story</a></li>
              <li><a href="#enhanced-communication" class="hover:text-indigo-600">Communication</a></li>
              <li><a href="#enhanced-simple-checklist" class="hover:text-indigo-600">Checklist</a></li>
              <li><a href="#enhanced-phases" class="hover:text-indigo-600">Phases</a></li>
              <li><a href="#enhanced-scope" class="hover:text-indigo-600">Scope & Inclusions</a></li>
              <li><a href="#enhanced-kpis" class="hover:text-indigo-600">KPIs</a></li>
              <li><a href="#enhanced-glossary" class="hover:text-indigo-600">Glossary</a></li>
              <li><a href="#enhanced-initial-setup" class="hover:text-indigo-600">Initial Setup</a></li>
              <li><a href="#enhanced-prereqs" class="hover:text-indigo-600">Access & Prereqs</a></li>
              <li><a href="#enhanced-tooling" class="hover:text-indigo-600">Tooling</a></li>
              <li><a href="#enhanced-design" class="hover:text-indigo-600">Design</a></li>
              <li><a href="#enhanced-security" class="hover:text-indigo-600">Security</a></li>
              <li><a href="#enhanced-timeline" class="hover:text-indigo-600">Timeline</a></li>
              <li><a href="#enhanced-templates" class="hover:text-indigo-600">Templates</a></li>
              <li><a href="#enhanced-audit-monitoring" class="hover:text-indigo-600">Audit & Monitoring</a></li>
            </ol>
          </details>
          <details class="mt-4">
            <summary class="font-semibold cursor-pointer">Enterprise Tier</summary>
            <ol class="ml-4 mt-2 space-y-1 list-decimal">
              <li><a href="#enterprise-story" class="hover:text-indigo-600">Quick Story</a></li>
              <li><a href="#enterprise-communication" class="hover:text-indigo-600">Communication</a></li>
              <li><a href="#enterprise-simple-checklist" class="hover:text-indigo-600">Checklist</a></li>
              <li><a href="#enterprise-phases" class="hover:text-indigo-600">Phases</a></li>
              <li><a href="#enterprise-scope" class="hover:text-indigo-600">Scope & Inclusions</a></li>
              <li><a href="#enterprise-kpis" class="hover:text-indigo-600">KPIs</a></li>
              <li><a href="#enterprise-glossary" class="hover:text-indigo-600">Glossary</a></li>
              <li><a href="#enterprise-initial-setup" class="hover:text-indigo-600">Initial Setup</a></li>
              <li><a href="#enterprise-prereqs" class="hover:text-indigo-600">Access & Prereqs</a></li>
              <li><a href="#enterprise-tooling" class="hover:text-indigo-600">Tooling</a></li>
              <li><a href="#enterprise-design" class="hover:text-indigo-600">Design</a></li>
              <li><a href="#enterprise-security" class="hover:text-indigo-600">Security</a></li>
              <li><a href="#enterprise-timeline" class="hover:text-indigo-600">Timeline</a></li>
              <li><a href="#enterprise-templates" class="hover:text-indigo-600">Templates</a></li>
              <li><a href="#enterprise-audit-monitoring" class="hover:text-indigo-600">Audit & Monitoring</a></li>
            </ol>
          </details>
          <div class="mt-4 border-t pt-3">
            <a href="#overview" class="inline-block px-3 py-2 border rounded-lg hover:bg-gray-50">Back to top</a>
          </div>
        </nav>
      </aside>

      <div class="md:col-span-9 space-y-12">
        <section class="sec" id="tier-overview">
          <div class="bg-white border rounded-2xl p-6">
            <h2 class="text-2xl font-bold">🧭 Tier Overview</h2>
            <p class="mt-2 text-sm text-gray-700">Mirrors the Sales service page: Core (lean setup), Enhanced (managed workflows), Enterprise (governed scale).</p>
            <div class="mt-4 flex flex-wrap gap-3">
              <a href="#tier-core" class="px-3 py-2 rounded-lg border text-sm hover:bg-gray-50">Go to Core</a>
              <a href="#tier-enhanced" class="px-3 py-2 rounded-lg border text-sm hover:bg-gray-50">Go to Enhanced</a>
              <a href="#tier-enterprise" class="px-3 py-2 rounded-lg border text-sm hover:bg-gray-50">Go to Enterprise</a>
            </div>
            <div class="overflow-x-auto mt-6 bg-white border rounded-2xl">
              <table class="min-w-full text-sm">
                <thead class="bg-gray-50 text-gray-600"><tr><th class="p-3 text-left">Tier</th><th class="p-3 text-left">Best For</th><th class="p-3 text-left">Includes (one‑line)</th><th class="p-3 text-left">Notable Differences</th></tr></thead>
                <tbody class="divide-y">
                  <tr><td class="p-3 font-semibold">Core</td><td class="p-3">Lean teams, fast basics</td><td class="p-3">CRM wiring, speed‑to‑lead, simple sequences, basic dedupe</td><td class="p-3">HubSpot Starter/Salesforce basics, Zapier, Calendly</td></tr>
                  <tr><td class="p-3 font-semibold">Enhanced</td><td class="p-3">Scaling outreach + routing</td><td class="p-3">Workflows, enrichment, SLA timers, AI‑assisted copy</td><td class="p-3">Make/Workato, Apollo/Twilio, bi‑directional sync</td></tr>
                  <tr><td class="p-3 font-semibold">Enterprise</td><td class="p-3">Governed, secure scale</td><td class="p-3">SSO/RBAC, audit logs, private AI, warehouse sync</td><td class="p-3">Okta, MuleSoft/Workato Ent., Snowflake/BigQuery</td></tr>
                </tbody>
              </table>
            </div>
          </div>
        </section>

        <!-- Core Tier -->
        <section class="sec space-y-8" id="tier-core">
          <h2 class="text-3xl font-bold tracking-tight">⚡ Core Tier — Sales & CRM Automation</h2>
          <p class="mt-2 text-gray-600">Lean setup to standardize capture, routing, and first‑touch sequencing with minimal tools.</p>

          <section class="sec" id="core-story">
            <div class="bg-white border rounded-2xl p-6">
              <h3 class="text-xl font-bold">✨ Quick Story — What will happen</h3>
              <p class="mt-3 text-sm text-gray-700">We connect forms to your CRM, set up basic dedupe and field mapping, enable instant alerts, and launch simple on‑brand sequences. We start in a sandbox where possible, then soft‑launch and monitor.</p>
              <ul class="list-disc list-inside mt-3 text-sm text-gray-700 space-y-1">
                <li><strong>Wire capture:</strong> Website forms/webhooks flow into CRM (upsert by email).</li>
                <li><strong>Fast response:</strong> Slack/email alerts to owners; calendar link in first two touches.</li>
                <li><strong>Clean data:</strong> Basic dedupe (email+domain), normalized phone, UTM mapping.</li>
                <li><strong>Safety:</strong> SPF/DKIM/DMARC before sending; test with sample leads first.</li>
              </ul>
              <details class="mt-3"><summary class="font-semibold">Newbie guide: How this feels end‑to‑end</summary>
                <div class="mt-2 text-sm text-gray-700 space-y-2">
                  <p><strong>Story mode:</strong> You will first take a simple “before” snapshot so we know your starting point. Then you’ll connect your website form to the CRM so new leads show up automatically. Next, you’ll turn on quick alerts and add your calendar link to a short, friendly email. You’ll send a few test leads to make sure everything works. Finally, you’ll launch to a small slice of traffic, watch for problems, fix them, and then turn it on for everyone.</p>
                  <ol class="list-decimal list-inside space-y-1">
                    <li>Take a “before picture”: export 30 days of leads and activities so we can prove improvement later.</li>
                    <li>Connect your website form to the CRM so new leads appear automatically (no copy‑paste).</li>
                    <li>Turn on instant alerts so someone reaches out fast. Add your calendar link to the first message.</li>
                    <li>Send a few test leads from a test page to make sure records are created and messages send.</li>
                    <li>Launch to a portion of traffic for 1–2 days (soft‑launch), fix issues, then turn it on for everyone.</li>
                  </ol>
                  <div class="border rounded p-3 bg-gray-50">
                    <p class="font-semibold">Example first touch</p>
<pre class="whitespace-pre-wrap text-xs">Subject: Thanks for reaching out — quick next step
Hi {{first_name}}, thanks for your note. Here’s my calendar: {{calendar_link}}.
Talk soon — {{owner_name}}</pre>
                  </div>
                  <ul class="list-disc list-inside space-y-1">
                    <li><strong>Success:</strong> Median speed‑to‑lead ≤ 2 minutes; ≥95% of touches logged.</li>
                    <li><strong>If something breaks:</strong> We pause, fix the flow, and resume. Your baseline export tells us what to correct.</li>
                  </ul>
                </div>
              </details>
            </div>
          </section>

          <section class="sec" id="core-communication">
            <div class="bg-white border rounded-2xl p-6 text-sm space-y-2">
              <h3 class="text-xl font-bold">💬 Communication & Reporting</h3>
              <ul class="list-disc list-inside space-y-1 mt-2">
                <li><strong>Blueprint:</strong> 1‑page plan (goals, KPIs, owners) after discovery.</li>
                <li><strong>Cadence:</strong> Weekly updates (Done, Next, Risks/Needs) + sandbox demo.</li>
                <li><strong>Reporting:</strong> Monthly snapshot: speed‑to‑lead, activity coverage, conversion lift.</li>
              </ul>
            </div>
          </section>

          <section class="sec" id="core-simple-checklist">
            <div class="bg-white border rounded-2xl p-6">
              <h3 class="text-xl font-bold">✅ Simplified Process Timeline and Checklist</h3>
              <p class="text-gray-600 text-sm">Use this live checklist. Progress stores in your browser only.</p>
              <div class="mt-3 h-2 bg-gray-100 rounded">
                <div id="core-progress-bar" class="h-2 bg-indigo-500 w-0 rounded" role="progressbar" aria-valuemin="0" aria-valuemax="100" aria-valuenow="0" aria-labelledby="core-progress-text"></div>
              </div>
              <div id="core-progress-text" class="text-xs text-gray-500 mt-1" aria-live="polite">0% complete</div>

              <div class="mt-6 space-y-6" id="core-checklist">
                <div class="border rounded-xl p-4">
                  <p class="font-semibold mb-2">Step 1 — Kickoff & Baseline</p>
                  <label class="flex items-start gap-3 mb-2"><input type="checkbox" class="mt-1" data-id="core-kickoff"/> <span>1‑page charter with KPIs (speed‑to‑lead, MQL→SQL, logging)</span></label>
                  <label class="flex items-start gap-3 mb-2"><input type="checkbox" class="mt-1" data-id="core-baseline"/> <span>Export 30‑day baseline CSVs (leads, activities)</span></label>
                  <label class="flex items-start gap-3"><input type="checkbox" class="mt-1" data-id="core-access"/> <span>Grant sandbox/admin access (CRM, email/SMS, Zapier/Make)</span></label>
                  <details class="mt-3">
                    <summary class="font-semibold">Newbie guide: Baseline and access</summary>
                    <div class="mt-2 text-sm text-gray-700 space-y-2">
                      <p><strong>Story mode:</strong> You will open your CRM reports, export the last 30 days to a CSV, and save it in the project folder. Then you’ll create a special “service user” in each tool (CRM and messaging) so automations don’t run under anyone’s personal login. You’ll copy the keys or tokens to a safe place (secrets manager).</p>
                      <p><strong>Baseline = before photo.</strong> Export “Leads with activities (last 30 days)” from HubSpot/Salesforce as CSV and save it in <code>/01_discovery/baseline/</code>. This is your reference if you need to undo mistakes.</p>
                      <p><strong>Access:</strong> Ask for a dedicated “service” user in the CRM and messaging tool. This keeps personal logins out of automations and makes offboarding easy.</p>
                      <ol class="list-decimal list-inside">
                        <li>HubSpot: create a Private App token with minimal scopes (CRM, Workflows, Webhooks).</li>
                        <li>Salesforce: use a Sandbox if possible; create an Integration User + Connected App (OAuth).</li>
                        <li>Email/SMS: collect API keys or SMTP creds; you’ll add sender authentication later.</li>
                      </ol>
                    </div>
                  </details>
                </div>

                <div class="border rounded-xl p-4">
                  <p class="font-semibold mb-2">Step 2 — Data Model & Dedupe</p>
                  <label class="flex items-start gap-3 mb-2"><input type="checkbox" class="mt-1" data-id="core-fields"/> <span>Field map (lead/contact, company, deal) with API names</span></label>
                  <label class="flex items-start gap-3 mb-2"><input type="checkbox" class="mt-1" data-id="core-dedupe"/> <span>Dedupe rules (email+domain), soft‑merge policy</span></label>
                  <label class="flex items-start gap-3"><input type="checkbox" class="mt-1" data-id="core-sample"/> <span>Validate with sample CSV (20–50 rows)</span></label>
                  <details class="mt-3">
                    <summary class="font-semibold">Newbie guide: Mapping fields and avoiding duplicates</summary>
                    <div class="mt-2 text-sm text-gray-700 space-y-2">
                      <p><strong>Story mode:</strong> You will write a tiny table listing each piece of info you need (like email and name) and the exact property/API names in the CRM. Then you’ll decide how to avoid duplicates (match on email, maybe domain). You’ll test with a 20–50 row CSV to make sure new uploads update the same record instead of creating copies.</p>
                      <p>Write a simple table with three columns: “What we track” → “HubSpot property / Salesforce API name” → “Example value”. Start with <code>email</code>, <code>first_name</code>, <code>utm_source</code>, and <code>consent</code>.</p>
                      <p><strong>Dedupe rule:</strong> check by <code>email</code>; if you also sell to companies, include <code>domain</code>.</p>
                      <p>Test by importing 20–50 rows. If imports create duplicates, adjust the rule and repeat.</p>
                    </div>
                  </details>
                </div>

                <div class="border rounded-xl p-4">
                  <p class="font-semibold mb-2">Step 3 — Capture & Routing</p>
                  <label class="flex items-start gap-3 mb-2"><input type="checkbox" class="mt-1" data-id="core-intake"/> <span>Webhooks/forms to CRM (upsert by email)</span></label>
                  <label class="flex items-start gap-3 mb-2"><input type="checkbox" class="mt-1" data-id="core-alerts"/> <span>Speed‑to‑lead alerting (Slack/email) with owner links</span></label>
                  <label class="flex items-start gap-3"><input type="checkbox" class="mt-1" data-id="core-routing"/> <span>Owner assignment (round‑robin or simple rules)</span></label>
                  <details class="mt-3">
                    <summary class="font-semibold">Newbie guide: Connect the form and send alerts</summary>
                    <div class="mt-2 text-sm text-gray-700 space-y-2">
                      <p><strong>Story mode:</strong> You will create a simple automation: the form sends data to Zapier/Make, which creates or updates a contact in the CRM by email. Next, you’ll set owner assignment. Finally, you’ll post a Slack alert with the lead link so a human can reply fast.</p>
                      <ol class="list-decimal list-inside space-y-1">
                        <li>Form → Zapier: “Catch Webhook” step; map fields to CRM upsert by <code>email</code>.</li>
                        <li>Owner assignment: start with round‑robin (A, B, C, A…). Keep a <code>last_assigned_at</code> field.</li>
                        <li>Slack alert: post “New lead” with record link, page URL, UTM source, and owner.</li>
                      </ol>
                      <p>If you’re lost, do one connection at a time. Verify a single test lead shows up in the CRM with the right owner before adding alerts.</p>
                    </div>
                  </details>
                </div>

                <div class="border rounded-xl p-4">
                  <p class="font-semibold mb-2">Step 4 — Sequences & Deliverability</p>
                  <label class="flex items-start gap-3 mb-2"><input type="checkbox" class="mt-1" data-id="core-auth"/> <span>SPF/DKIM/DMARC verified; quiet hours configured</span></label>
                  <label class="flex items-start gap-3 mb-2"><input type="checkbox" class="mt-1" data-id="core-templates"/> <span>3–6 on‑brand email/SMS templates with calendar link</span></label>
                  <label class="flex items-start gap-3"><input type="checkbox" class="mt-1" data-id="core-logging"/> <span>Auto‑logging for touches (template_id, status)</span></label>
                  <details class="mt-3">
                    <summary class="font-semibold">Newbie guide: Don’t get flagged as spam</summary>
                    <div class="mt-2 text-sm text-gray-700 space-y-2">
                      <p><strong>Story mode:</strong> You will paste the SPF, DKIM, and DMARC DNS records your email tool gives you into your domain settings and wait for verification. Then you’ll set quiet hours so messages don’t send in the middle of the night. Finally, you’ll write short, on‑brand templates with one clear action (book time).</p>
                      <ul class="list-disc list-inside space-y-1">
                        <li><strong>SPF/DKIM/DMARC:</strong> your email provider shows DNS records to add; paste them in your domain host (GoDaddy/Cloudflare). Wait until they say “verified”.</li>
                        <li><strong>Quiet hours:</strong> set “do not send” between 9pm–8am in the lead’s timezone.</li>
                        <li><strong>Templates:</strong> short, friendly, one clear call‑to‑action (book a time).</li>
                      </ul>
                    </div>
                  </details>
                </div>

                <div class="border rounded-xl p-4">
                  <p class="font-semibold mb-2">Step 5 — Test & Launch</p>
                  <label class="flex items-start gap-3 mb-2"><input type="checkbox" class="mt-1" data-id="core-uat"/> <span>UAT with fake leads; verify routing & logging</span></label>
                  <label class="flex items-start gap-3 mb-2"><input type="checkbox" class="mt-1" data-id="core-soft"/> <span>Soft‑launch at 25–50% traffic for 48h</span></label>
                  <label class="flex items-start gap-3"><input type="checkbox" class="mt-1" data-id="core-rollout"/> <span>Full rollout after checks; share KPI snapshot</span></label>
                  <details class="mt-3">
                    <summary class="font-semibold">Newbie guide: Soft‑launch safely</summary>
                    <div class="mt-2 text-sm text-gray-700 space-y-2">
                      <p><strong>Story mode:</strong> You will turn the automation on for a small portion of leads (about a quarter to half). You’ll watch for duplicates, wrong owners, or missing logs. If anything looks off, you’ll flip the “pause” switch, fix it, and try again. Once it’s clean for two days, you’ll go to 100% and share a short results snapshot.</p>
                      <p>Start small so mistakes affect few people. Watch for duplicates, wrong owners, or missing logs. Fix quickly, then increase to 100%.</p>
                      <ul class="list-disc list-inside space-y-1">
                        <li>Test cases: normal lead, duplicate email, missing phone, no consent (SMS blocked).</li>
                        <li>Rollback: keep a toggle in Zapier to pause the Zap or revert to manual routing.</li>
                      </ul>
                    </div>
                  </details>
                </div>
              </div>

              <div class="mt-6 flex items-center gap-3">
                <button id="core-reset" class="text-sm px-3 py-2 rounded-lg border hover:bg-gray-50" aria-label="Reset checklist">Reset checklist</button>
                <span class="text-xs text-gray-500">Saved locally in this browser.</span>
              </div>
            </div>
          </section>

          <section class="sec" id="core-phases">
            <h3 class="text-xl font-bold mb-3">🧭 Delivery Phases</h3>
            <div class="bg-white border rounded-2xl overflow-hidden text-sm">
              <table class="min-w-full"><thead class="bg-gray-50 text-gray-600"><tr><th class="p-3 text-left">Phase</th><th class="p-3 text-left">Key Tasks</th><th class="p-3 text-left">Owner</th><th class="p-3 text-left">Outputs</th></tr></thead>
                <tbody class="divide-y">
                  <tr><td class="p-3 font-semibold">Discovery</td><td class="p-3">Goals, KPIs, access</td><td class="p-3">You + Client</td><td class="p-3">Charter, baseline</td></tr>
                  <tr><td class="p-3 font-semibold">Design</td><td class="p-3">Field map, routing, templates</td><td class="p-3">You</td><td class="p-3">Spec, templates</td></tr>
                  <tr><td class="p-3 font-semibold">Build</td><td class="p-3">Webhooks, alerts, logging</td><td class="p-3">You</td><td class="p-3">Working flows</td></tr>
                  <tr><td class="p-3 font-semibold">Test</td><td class="p-3">UAT with sample leads</td><td class="p-3">You + Client</td><td class="p-3">UAT report</td></tr>
                  <tr><td class="p-3 font-semibold">Launch</td><td class="p-3">Soft‑launch → sitewide</td><td class="p-3">You</td><td class="p-3">Go‑live</td></tr>
                  <tr><td class="p-3 font-semibold">Optimize</td><td class="p-3">Monthly snapshot</td><td class="p-3">You</td><td class="p-3">Trends + fixes</td></tr>
                </tbody>
              </table>
            </div>
          </section>

          <section class="sec" id="core-scope">
            <h3 class="text-xl font-bold mb-3">📦 Scope & Inclusions</h3>
            <ul class="bg-white border rounded-2xl p-6 space-y-2 text-sm">
              <li>CRM wiring (forms/webhooks), basic dedupe, simple routing</li>
              <li>Speed‑to‑lead alerts; 3–6 email/SMS templates; calendar link</li>
              <li>Auto‑logging where supported; weekly health check</li>
            </ul>
          </section>

          <section class="sec" id="core-kpis">
            <h3 class="text-xl font-bold mb-3">📈 KPIs & Reporting</h3>
            <div class="bg-white border rounded-2xl overflow-hidden text-sm">
              <table class="min-w-full"><thead class="bg-gray-50 text-gray-600"><tr><th class="p-3 text-left">Metric</th><th class="p-3 text-left">Target</th><th class="p-3 text-left">Notes</th></tr></thead>
                <tbody class="divide-y">
                  <tr><td class="p-3">Speed‑to‑Lead</td><td class="p-3">≤ 2 min</td><td class="p-3">Submission → first touch</td></tr>
                  <tr><td class="p-3">Activity Logging</td><td class="p-3">≥ 95%</td><td class="p-3">Touches logged with template_id</td></tr>
                  <tr><td class="p-3">MQL→SQL</td><td class="p-3">+15% in 60 days</td><td class="p-3">Baseline vs. post‑launch</td></tr>
                </tbody>
              </table>
            </div>
          </section>

          <section class="sec" id="core-glossary">
            <h3 class="text-xl font-bold mb-3">📚 Glossary (Newbie‑friendly)</h3>
            <div class="bg-white border rounded-2xl p-6 text-sm space-y-2">
              <p><strong>Upsert</strong>: Update if exists, else insert, to avoid duplicates.</p>
              <p><strong>Quiet hours</strong>: Time ranges when messages won’t send.</p>
              <p><strong>UTM</strong>: Marketing tags telling us where a lead came from.</p>
            </div>
          </section>

          <div class="border-t pt-10">
            <h3 class="text-2xl font-bold">🧰 Part 2: Implementer’s Guide</h3>
            <p class="mt-2 text-gray-600 text-sm">Step‑by‑step SOPs for Core tier.</p>
          </div>

          <section class="sec" id="core-initial-setup">
            <h3 class="text-xl font-bold mb-3">🛠️ Initial Setup (SOP)</h3>
            <div class="bg-white border rounded-2xl p-6 text-sm space-y-4">
              <ul class="list-disc list-inside space-y-1">
                <li>Create folders: <code>/01_discovery</code> … <code>/06_optimize</code>.</li>
                <li>Baseline exports; 1‑page charter; tracker (Notion/Trello).</li>
              </ul>
              <div class="border rounded p-4">
                <p class="font-semibold">Zapier Speed‑to‑Lead (concept)</p>
<pre class="whitespace-pre-wrap text-xs">trigger = new_form_submission()
lead = enrich(trigger.payload, timeout_ms=2500)
crm.upsert_contact(email=lead.email, fields=lead)
owner = assign_owner(lead)
notify_slack(owner, lead, link=crm.link(lead))
log_activity(lead, template_id="t1", status="queued")
</pre>
              </div>
            </div>
          </section>

          <section class="sec" id="core-prereqs">
            <h3 class="text-xl font-bold mb-3">🔑 Access & Prereqs</h3>
            <ul class="bg-white border rounded-2xl p-6 space-y-2 text-sm">
              <li>CRM sandbox/admin; email/SMS provider; Zapier/Make account.</li>
              <li>DNS access for SPF/DKIM/DMARC; calendar tool link.</li>
            </ul>
          </section>

          <section class="sec" id="core-tooling">
            <h3 class="text-xl font-bold mb-3">🔧 Tooling Options</h3>
            <div class="bg-white border rounded-xl overflow-hidden text-sm">
              <table class="min-w-full"><thead class="bg-gray-50 text-gray-600"><tr><th class="p-3 text-left">Category</th><th class="p-3 text-left">Options</th><th class="p-3 text-left">Notes</th></tr></thead>
                <tbody class="divide-y">
                  <tr><td class="p-3 font-semibold">CRM</td><td class="p-3">HubSpot Starter, Salesforce basics</td><td class="p-3">Use sandbox if available</td></tr>
                  <tr><td class="p-3 font-semibold">Automation</td><td class="p-3">Zapier</td><td class="p-3">Rate limit controls</td></tr>
                  <tr><td class="p-3 font-semibold">Messaging</td><td class="p-3">HubSpot email, Twilio SMS</td><td class="p-3">Quiet hours + auth</td></tr>
                  <tr><td class="p-3 font-semibold">Calendar</td><td class="p-3">Calendly/HubSpot Meetings</td><td class="p-3">Owner routing</td></tr>
                </tbody>
              </table>
            </div>
          </section>

          <section class="sec" id="core-design">
            <h3 class="text-xl font-bold mb-3">💡 Design Notes</h3>
            <div class="bg-white border rounded-2xl p-6 space-y-2 text-sm">
              <ul class="list-disc list-inside space-y-1">
                <li>Upsert by email; attach UTM; normalize phone (E.164).</li>
                <li>Round‑robin or simple rules; alert with direct record links.</li>
                <li>Templates: short, on‑brand, with clear call‑to‑action.</li>
              </ul>
            </div>
          </section>

          <section class="sec" id="core-security">
            <h3 class="text-xl font-bold mb-3">🛡️ Security & Compliance</h3>
            <div class="bg-white border rounded-2xl p-6 space-y-2 text-sm">
              <ul class="list-disc list-inside space-y-1">
                <li>Least‑privilege service users; rotate tokens; store in a secrets manager.</li>
                <li>PII minimization: collect only needed fields; set retention window.</li>
                <li>Email auth (SPF/DKIM/DMARC) before any scaled sending.</li>
              </ul>
            </div>
          </section>

          <section class="sec" id="core-timeline">
            <h3 class="text-xl font-bold mb-3">🗓️ Detailed Timeline</h3>
            <div class="bg-white border rounded-2xl p-6 text-sm">
              <ol class="list-decimal list-inside space-y-1">
                <li>W1: Discovery, baseline, access, field map.</li>
                <li>W2: Capture, routing, templates, deliverability.</li>
                <li>W3: UAT, soft‑launch, monitor 48h, rollout.</li>
                <li>W4+: Weekly health checks; monthly KPIs.</li>
              </ol>
            </div>
          </section>

          <section class="sec" id="core-templates">
            <h3 class="text-xl font-bold mb-3">🧩 Templates & Snippets</h3>
            <div class="bg-white border rounded-2xl p-6 text-sm space-y-3">
<pre class="whitespace-pre-wrap text-xs">Speed‑to‑lead Slack alert:
:new: New lead {{email}} → {{owner}}
Page: {{page_url}} | Source: {{utm_source}}
Open: {{crm_link}}
</pre>
<pre class="whitespace-pre-wrap text-xs">Email template (first touch):
Subject: Quick follow‑up from {{brand}}
Hi {{first_name}} — thanks for reaching out! Here’s my calendar: {{calendar_link}}.
Talk soon,
{{owner_name}}
</pre>
            </div>
          </section>

          <section class="sec" id="core-audit-monitoring">
            <h3 class="text-xl font-bold mb-3">🔍 Audit & Monitoring</h3>
            <div class="bg-white border rounded-2xl p-6 text-sm space-y-2">
              <ul class="list-disc list-inside space-y-1">
                <li>Weekly: check error inbox; verify logging coverage ≥95%.</li>
                <li>Monthly: snapshot trends for speed‑to‑lead, MQL→SQL, reply rates.</li>
              </ul>
            </div>
          </section>
        </section>

        <!-- Enhanced Tier -->
        <section class="sec space-y-8" id="tier-enhanced">
          <h2 class="text-3xl font-bold tracking-tight">🚀 Enhanced Tier — Sales & CRM Automation</h2>
          <p class="mt-2 text-gray-600">Adds enrichment, intelligent routing, AI‑assisted sequences, SLA timers, and dashboards.</p>

          <section class="sec" id="enhanced-story">
            <div class="bg-white border rounded-2xl p-6">
              <h3 class="text-xl font-bold">✨ Quick Story — What will happen</h3>
              <p class="mt-3 text-sm text-gray-700">We build stage‑driven workflows (MQL→SQL→Opp), enrich and score leads, validate contactability, add AI‑drafted outreach with approvals, and sync with sales tools. A UAT pack verifies routing, SLAs, and error handling.</p>
              <ul class="list-disc list-inside mt-3 text-sm text-gray-700 space-y-1">
                <li><strong>Workflows:</strong> owner routing by rules/territory; SLA timers + escalations.</li>
                <li><strong>Enrichment:</strong> firmographics/intent; scoring for a fast lane.</li>
                <li><strong>Sequences:</strong> AI‑drafted copy with human approval; tokenized variables.</li>
                <li><strong>Sync:</strong> Outreach/Salesloft/Apollo; dedupe + idempotent webhooks.</li>
              </ul>
              <details class="mt-3"><summary class="font-semibold">Newbie guide: What Enhanced adds beyond Core</summary>
                <div class="mt-2 text-sm text-gray-700 space-y-2">
                  <p><strong>Story mode:</strong> You will turn on enrichment so missing details fill in automatically. You’ll add a simple scoring rule so hot leads get handled first. You’ll create an SLA timer so if no one replies in time, a reminder or escalation happens. For messages, AI drafts the copy, and you (a human) click approve before anything sends. Finally, you’ll connect your sequence tool so activity stays in sync.</p>
                  <p>Think “traffic rules” and “quality checks”. We send better data (enrichment), score it, route it to the right owner, and ensure fast responses (SLAs). Drafted messages get human approval before they go out.</p>
                  <ul class="list-disc list-inside space-y-1">
                    <li><strong>Enrichment:</strong> fill in blanks like company size. If a tool is slow, skip it and continue.</li>
                    <li><strong>Scoring:</strong> points for good fit (industry, employees) and behavior (pricing page visit).</li>
                    <li><strong>Approvals:</strong> AI writes; you approve; the system sends.</li>
                  </ul>
                </div>
              </details>
            </div>
          </section>

          <section class="sec" id="enhanced-communication">
            <div class="bg-white border rounded-2xl p-6 text-sm space-y-2">
              <h3 class="text-xl font-bold">💬 Communication & Reporting</h3>
              <ul class="list-disc list-inside space-y-1">
                <li>Weekly updates; change log for workflows/templates; UAT schedule.</li>
                <li>Monthly deck: conversion by segment/intent, SLA compliance, errors.</li>
              </ul>
            </div>
          </section>

          <section class="sec" id="enhanced-simple-checklist">
            <div class="bg-white border rounded-2xl p-6">
              <h3 class="text-xl font-bold">✅ Simplified Process Timeline and Checklist</h3>
              <p class="text-gray-600 text-sm">Independent per tier. Progress saved locally.</p>
              <div class="mt-3 h-2 bg-gray-100 rounded">
                <div id="enhanced-progress-bar" class="h-2 bg-indigo-500 w-0 rounded" role="progressbar" aria-valuemin="0" aria-valuemax="100" aria-valuenow="0" aria-labelledby="enhanced-progress-text"></div>
              </div>
              <div id="enhanced-progress-text" class="text-xs text-gray-500 mt-1" aria-live="polite">0% complete</div>

              <div class="mt-6 space-y-6" id="enhanced-checklist">
                <div class="border rounded-xl p-4">
                  <p class="font-semibold mb-2">Step 1 — Discovery & CRM</p>
                  <label class="flex items-start gap-3 mb-2"><input type="checkbox" class="mt-1" data-id="enhanced-kickoff"/> <span>Intents/segments, routing rules, approval workflow</span></label>
                  <label class="flex items-start gap-3 mb-2"><input type="checkbox" class="mt-1" data-id="enhanced-access"/> <span>CRM + iPaaS (Make/Workato) + messaging keys</span></label>
                  <label class="flex items-start gap-3"><input type="checkbox" class="mt-1" data-id="enhanced-map"/> <span>Field mapping doc incl. tags/scores/owner logic</span></label>
                  <details class="mt-3"><summary class="font-semibold">Newbie guide: Segments, rules, and approvals</summary>
                    <div class="mt-2 text-sm text-gray-700 space-y-2">
                      <p><strong>Story mode:</strong> You will list your lead groups (like “US”, “EU”, “Enterprise”) and write a one‑line routing rule for each. Then you’ll set up a simple approval step so AI‑drafted messages wait for a green‑light click before sending.</p>
                      <p><strong>Segments</strong> are groups like “EU leads” or “Enterprise prospects”. Routing rules say who owns each group. Write them in plain English first.</p>
                      <p><strong>Approval workflow:</strong> Create a simple process where AI drafts a message, a human clicks approve, then it sends. Start with 1 approver.</p>
                    </div>
                  </details>
                </div>

                <div class="border rounded-xl p-4">
                  <p class="font-semibold mb-2">Step 2 — Enrichment & Scoring</p>
                  <label class="flex items-start gap-3 mb-2"><input type="checkbox" class="mt-1" data-id="enhanced-enrich"/> <span>Integrate enrichment (Apollo/Clearbit/Clay) with timeouts</span></label>
                  <label class="flex items-start gap-3 mb-2"><input type="checkbox" class="mt-1" data-id="enhanced-score"/> <span>Score model + fast lane thresholds + SLA timers</span></label>
                  <label class="flex items-start gap-3"><input type="checkbox" class="mt-1" data-id="enhanced-dedupe"/> <span>Deterministic dedupe + fuzzy pass with review</span></label>
                  <details class="mt-3"><summary class="font-semibold">Newbie guide: Safer enrichment and scoring</summary>
                    <div class="mt-2 text-sm text-gray-700 space-y-2">
                      <p><strong>Story mode:</strong> You will choose one enrichment source, set a short timeout so the flow never stalls, map the fields you care about (like company size), and calculate a score. If the score is high enough, you’ll route the lead immediately and ping Slack.</p>
                      <ul class="list-disc list-inside space-y-1">
                        <li>Set a timeout (e.g., 2.5s). If enrichment is slow, keep going with what you have.</li>
                        <li>Score example: +20 if employee_count 50–500, +15 if pricing page visited, −20 if free email.</li>
                        <li>Fast lane: score ≥ 70 → assign instantly and alert Slack.</li>
                      </ul>
                    </div>
                  </details>
                </div>

                <div class="border rounded-xl p-4">
                  <p class="font-semibold mb-2">Step 3 — Workflows & Sequences</p>
                  <label class="flex items-start gap-3 mb-2"><input type="checkbox" class="mt-1" data-id="enhanced-workflows"/> <span>Stage‑driven workflows with routes/escalations</span></label>
                  <label class="flex items-start gap-3 mb-2"><input type="checkbox" class="mt-1" data-id="enhanced-seq"/> <span>AI‑drafted templates + approval gates</span></label>
                  <label class="flex items-start gap-3"><input type="checkbox" class="mt-1" data-id="enhanced-sync"/> <span>Bi‑directional sync (Outreach/Salesloft/Apollo)</span></label>
                  <details class="mt-3"><summary class="font-semibold">Newbie guide: Build one workflow at a time</summary>
                    <div class="mt-2 text-sm text-gray-700 space-y-2">
                      <p><strong>Story mode:</strong> You will first build a tiny flow that assigns an owner and sends the first email. Then you’ll add an SLA reminder if no one replies. When that works, you’ll add an AI‑drafted follow‑up with approvals, and only then connect external tools like Outreach or Salesloft.</p>
                      <ol class="list-decimal list-inside space-y-1">
                        <li>Start with “New lead → Assign owner → Send first email”.</li>
                        <li>Add SLA timer: if no reply within X hours, escalate to a manager or send a reminder.</li>
                        <li>Only when stable, add sequences and the external sales tool sync.</li>
                      </ol>
                    </div>
                  </details>
                </div>

                <div class="border rounded-xl p-4">
                  <p class="font-semibold mb-2">Step 4 — UAT & Launch</p>
                  <label class="flex items-start gap-3 mb-2"><input type="checkbox" class="mt-1" data-id="enhanced-uat"/> <span>UAT (30–50 cases: rules, 5xx/429, timeouts)</span></label>
                  <label class="flex items-start gap-3 mb-2"><input type="checkbox" class="mt-1" data-id="enhanced-guard"/> <span>Rate limiting; retries with backoff; idempotency keys</span></label>
                  <label class="flex items-start gap-3"><input type="checkbox" class="mt-1" data-id="enhanced-launch"/> <span>Launch + dashboard; monthly insights deck</span></label>
                  <details class="mt-3"><summary class="font-semibold">Newbie guide: Test the bad paths too</summary>
                    <div class="mt-2 text-sm text-gray-700 space-y-2">
                      <p><strong>Story mode:</strong> You will purposely break things (like causing a 429 rate limit) to watch your retries and idempotency keep data clean. You’ll confirm duplicates aren’t created and that your dashboard shows the errors clearly.</p>
                      <p>Don’t just test the happy path. Force errors and make sure your flows retry safely without duplication.</p>
                      <ul class="list-disc list-inside space-y-1">
                        <li><strong>Idempotency key:</strong> a unique ID on every request so repeats do not create duplicates.</li>
                        <li><strong>Backoff:</strong> retry after 1s, then 2s, then 4s for 5xx/429. Stop after 3 tries.</li>
                      </ul>
                    </div>
                  </details>
                </div>
              </div>

              <div class="mt-6 flex items-center gap-3">
                <button id="enhanced-reset" class="text-sm px-3 py-2 rounded-lg border hover:bg-gray-50" aria-label="Reset checklist">Reset checklist</button>
                <span class="text-xs text-gray-500">Saved locally in this browser.</span>
              </div>
            </div>
          </section>

          <section class="sec" id="enhanced-phases">
            <h3 class="text-xl font-bold mb-3">🧭 Delivery Phases</h3>
            <div class="bg-white border rounded-2xl overflow-hidden text-sm">
              <table class="min-w-full"><thead class="bg-gray-50 text-gray-600"><tr><th class="p-3 text-left">Phase</th><th class="p-3 text-left">Key Tasks</th><th class="p-3 text-left">Owner</th><th class="p-3 text-left">Outputs</th></tr></thead>
                <tbody class="divide-y">
                  <tr><td class="p-3 font-semibold">Discovery</td><td class="p-3">Segments, rules, SLAs</td><td class="p-3">You + Client</td><td class="p-3">Blueprint</td></tr>
                  <tr><td class="p-3 font-semibold">Design</td><td class="p-3">Workflows, scores, templates</td><td class="p-3">You</td><td class="p-3">Spec</td></tr>
                  <tr><td class="p-3 font-semibold">Build</td><td class="p-3">Enrichment, sync, timers</td><td class="p-3">You</td><td class="p-3">Working flows</td></tr>
                  <tr><td class="p-3 font-semibold">Test</td><td class="p-3">UAT pack + error paths</td><td class="p-3">You + Client</td><td class="p-3">Sign‑off</td></tr>
                  <tr><td class="p-3 font-semibold">Launch</td><td class="p-3">Go‑live + dashboard</td><td class="p-3">You</td><td class="p-3">KPI baseline</td></tr>
                  <tr><td class="p-3 font-semibold">Optimize</td><td class="p-3">Monthly deck</td><td class="p-3">You</td><td class="p-3">Insights</td></tr>
                </tbody>
              </table>
            </div>
            <p class="mt-2 text-xs text-gray-500">Definitions: Speed‑to‑lead = submission→first touch; SLA = time to owner contact; Idempotency = safe retry without duplicates.</p>
          </section>

          <section class="sec" id="enhanced-scope">
            <h3 class="text-xl font-bold mb-3">📦 Scope & Inclusions</h3>
            <ul class="bg-white border rounded-2xl p-6 space-y-2 text-sm">
              <li>All Core + enrichment/scoring + SLA timers</li>
              <li>Workflows with routing/escalations; AI‑drafted outreach with approvals</li>
              <li>Bi‑directional sync with sales tools; conversion dashboards</li>
            </ul>
          </section>

          <section class="sec" id="enhanced-kpis">
            <h3 class="text-xl font-bold mb-3">📈 KPIs & Reporting</h3>
            <div class="bg-white border rounded-2xl overflow-hidden text-sm">
              <table class="min-w-full"><thead class="bg-gray-50 text-gray-600"><tr><th class="p-3 text-left">Metric</th><th class="p-3 text-left">Target</th><th class="p-3 text-left">Notes</th></tr></thead>
                <tbody class="divide-y">
                  <tr><td class="p-3">Routing Accuracy</td><td class="p-3">≥ 98%</td><td class="p-3">Matches rule/territory</td></tr>
                  <tr><td class="p-3">SLA Compliance</td><td class="p-3">≥ 90%</td><td class="p-3">Within target window</td></tr>
                  <tr><td class="p-3">Sequence Reply Rate</td><td class="p-3">Trend ↑</td><td class="p-3">By segment/intent</td></tr>
                  <tr><td class="p-3">CRM Error Rate</td><td class="p-3">&lt; 1%</td><td class="p-3">Retries/backoff enabled</td></tr>
                </tbody>
              </table>
            </div>
          </section>

          <section class="sec" id="enhanced-glossary">
            <h3 class="text-xl font-bold mb-3">📚 Glossary (Newbie‑friendly)</h3>
            <div class="bg-white border rounded-2xl p-6 text-sm space-y-2">
              <p><strong>Territory</strong>: Route rules by geo/industry/segment.</p>
              <p><strong>SLA timer</strong>: Countdown to required first touch.</p>
              <p><strong>Idempotency</strong>: Unique key so retries don’t duplicate.</p>
            </div>
          </section>

          <div class="border-t pt-10">
            <h3 class="text-2xl font-bold">🧰 Part 2: Implementer’s Guide</h3>
            <p class="mt-2 text-gray-600 text-sm">Technical SOPs for Enhanced tier.</p>
          </div>

          <section class="sec" id="enhanced-initial-setup">
            <h3 class="text-xl font-bold mb-3">🛠️ Initial Setup (SOP)</h3>
            <ul class="bg-white border rounded-2xl p-6 space-y-2 text-sm">
              <li>Blueprint; routing matrix; approval flows; sandbox URLs.</li>
              <li>Secrets handling; API quotas; webhook endpoints; retries.</li>
            </ul>
          </section>

          <section class="sec" id="enhanced-prereqs">
            <h3 class="text-xl font-bold mb-3">🔑 Access & Prereqs</h3>
            <ul class="bg-white border rounded-2xl p-6 space-y-2 text-sm">
              <li>CRM admin, iPaaS (Make/Workato), messaging (Twilio/SendGrid), enrichment (Apollo/Clearbit/Clay).</li>
              <li>Sequence tool (HubSpot/Outreach/Salesloft/Apollo) as needed.</li>
            </ul>
          </section>

          <section class="sec" id="enhanced-tooling">
            <h3 class="text-xl font-bold mb-3">🔧 Tooling Options</h3>
            <div class="bg-white border rounded-2xl overflow-hidden text-sm">
              <table class="min-w-full"><thead class="bg-gray-50 text-gray-600"><tr><th class="p-3 text-left">Category</th><th class="p-3 text-left">Options</th><th class="p-3 text-left">Notes</th></tr></thead>
                <tbody class="divide-y">
                  <tr><td class="p-3 font-semibold">iPaaS</td><td class="p-3">Make, Workato</td><td class="p-3">Retries, rate limits</td></tr>
                  <tr><td class="p-3 font-semibold">Enrichment</td><td class="p-3">Apollo, Clearbit, Clay</td><td class="p-3">Timeouts/fallbacks</td></tr>
                  <tr><td class="p-3 font-semibold">Messaging</td><td class="p-3">Twilio, SendGrid</td><td class="p-3">Opt‑outs, quiet hours</td></tr>
                  <tr><td class="p-3 font-semibold">Sequences</td><td class="p-3">HubSpot, Outreach, Salesloft, Apollo</td><td class="p-3">Approval gates</td></tr>
                </tbody>
              </table>
            </div>
          </section>

          <section class="sec" id="enhanced-design">
            <h3 class="text-xl font-bold mb-3">💡 Design Notes</h3>
            <div class="bg-white border rounded-2xl p-6 space-y-2 text-sm">
              <ul class="list-disc list-inside space-y-1">
                <li>Owner rules before sequences; stop on booking or negative reply.</li>
                <li>Tagging for intent/segment; dashboard slices by tag.</li>
                <li>Idempotency on all webhooks; retry 1s/2s/4s; cap at 3.</li>
              </ul>
            </div>
          </section>

          <section class="sec" id="enhanced-security">
            <h3 class="text-xl font-bold mb-3">🛡️ Security & Compliance</h3>
            <div class="bg-white border rounded-2xl p-6 space-y-2 text-sm">
              <ul class="list-disc list-inside space-y-1">
                <li>Least‑privilege scopes; rotate tokens; log failures with redaction.</li>
                <li>Retention 60–90 days; export on request; DSR process.</li>
                <li>Audit webhook failures; alert on sustained errors &gt; 1%.</li>
              </ul>
            </div>
          </section>

          <section class="sec" id="enhanced-timeline">
            <h3 class="text-xl font-bold mb-3">🗓️ Detailed Timeline</h3>
            <ul class="bg-white border rounded-2xl p-6 space-y-2 text-sm">
              <li>Week 1–2: Design + enrichment + routing + sequences.</li>
              <li>Week 3: UAT; fixes; launch + dashboard.</li>
            </ul>
          </section>

          <section class="sec" id="enhanced-templates">
            <h3 class="text-xl font-bold mb-3">🧩 Templates & Snippets</h3>
            <div class="bg-white border rounded-2xl p-6 text-sm">
<pre class="whitespace-pre-wrap text-xs">Webhook with retries + idempotency (conceptual):
POST /events HTTP/1.1
Authorization: Bearer ***
Idempotency-Key: {{uuid}}

{ "email": "{{email}}", "intent": "demo", "score": 82 }

// Retry: 1s, 2s, 4s; stop after 3; 5xx/429 retryable.
</pre>
<pre class="whitespace-pre-wrap text-xs">UAT checklist (excerpt):
[ ] Route by territory and fast lane
[ ] SLA timer starts/stops correctly
[ ] Retry/backoff works; errors summarized daily
</pre>
            </div>
          </section>

          <section class="sec" id="enhanced-audit-monitoring">
            <h3 class="text-xl font-bold mb-3">🔍 Audit & Monitoring</h3>
            <div class="bg-white border rounded-2xl p-6 text-sm space-y-2">
              <ul class="list-disc list-inside space-y-1">
                <li>Daily: SLAs and error rates; alert if &gt; 1% failures.</li>
                <li>Weekly: top segments/intents; slow routes; copy tweaks.</li>
                <li>Monthly: conversion trends by segment; next actions.</li>
              </ul>
            </div>
          </section>
        </section>

        <!-- Enterprise Tier -->
        <section class="sec space-y-8" id="tier-enterprise">
          <h2 class="text-3xl font-bold tracking-tight">🏢 Enterprise Tier — Sales & CRM Automation</h2>
          <p class="mt-2 text-gray-600">SSO/RBAC/audit, governed changes, private AI endpoints, warehouse sync, and scale testing.</p>

          <section class="sec" id="enterprise-story">
            <div class="bg-white border rounded-2xl p-6">
              <h3 class="text-xl font-bold">✨ Quick Story — What will happen</h3>
              <p class="mt-3 text-sm text-gray-700">We implement identity (SSO/RBAC), audit trails, change management, and private AI endpoints. We sync to a warehouse for BI and enforce SLAs with observability. Rollouts are gated behind flags with canary percentages and fast rollback.</p>
              <ul class="list-disc list-inside mt-3 text-sm text-gray-700 space-y-1">
                <li><strong>Identity:</strong> Okta SAML/OIDC; SCIM provisioning; admin RBAC.</li>
                <li><strong>Governance:</strong> maker‑checker approvals; release calendar; change log.</li>
                <li><strong>Data:</strong> Warehouse sync (Snowflake/BigQuery); lineage; DLP.</li>
                <li><strong>AI:</strong> Private endpoints (Azure OpenAI) for sequence assistance.</li>
              </ul>
              <details class="mt-3"><summary class="font-semibold">Newbie guide: Why Enterprise is different</summary>
                <div class="mt-2 text-sm text-gray-700 space-y-2">
                  <p><strong>Story mode:</strong> You will protect access with SSO, define who can change what (RBAC), and ship changes behind feature flags. You’ll roll out to a small percentage first (canary), watch dashboards, and only then go broad. Important events will sync to your data warehouse so leadership has trustworthy metrics.</p>
                  <p>Enterprise isn’t “more features”, it’s “safer operation at scale”. We protect access (SSO), control changes (approvals), and watch health (observability) so nothing surprises executives or regulators.</p>
                  <ul class="list-disc list-inside space-y-1">
                    <li><strong>Flags + canary:</strong> new changes go to 5% of traffic, then 25%, then 100%.</li>
                    <li><strong>Warehouse sync:</strong> important events are copied to BI so leaders can see reliable metrics.</li>
                  </ul>
                </div>
              </details>
            </div>
          </section>

          <section class="sec" id="enterprise-communication">
            <div class="bg-white border rounded-2xl p-6 text-sm space-y-2">
              <h3 class="text-xl font-bold">💬 Communication & Reporting</h3>
              <ul class="list-disc list-inside space-y-1">
                <li>SLO dashboards (availability, sync latency, error budgets) and on‑call rotations.</li>
                <li>Quarterly audit packs and red‑team reviews; monthly evals.</li>
              </ul>
            </div>
          </section>

          <section class="sec" id="enterprise-simple-checklist">
            <div class="bg-white border rounded-2xl p-6">
              <h3 class="text-xl font-bold">✅ Simplified Process Timeline and Checklist</h3>
              <p class="text-gray-600 text-sm">Enterprise scope; separate progress tracking stored locally.</p>
              <div class="mt-3 h-2 bg-gray-100 rounded">
                <div id="enterprise-progress-bar" class="h-2 bg-indigo-500 w-0 rounded" role="progressbar" aria-valuemin="0" aria-valuemax="100" aria-valuenow="0" aria-labelledby="enterprise-progress-text"></div>
              </div>
              <div id="enterprise-progress-text" class="text-xs text-gray-500 mt-1" aria-live="polite">0% complete</div>

              <div class="mt-6 space-y-6" id="enterprise-checklist">
                <div class="border rounded-xl p-4">
                  <p class="font-semibold mb-2">Step 1 — Governance & Identity</p>
                  <label class="flex items-start gap-3 mb-2"><input type="checkbox" class="mt-1" data-id="enterprise-ssO"/> <span>SSO (SAML/OIDC), RBAC matrix, SCIM provisioning</span></label>
                  <label class="flex items-start gap-3 mb-2"><input type="checkbox" class="mt-1" data-id="enterprise-approvals"/> <span>Maker‑checker approvals; change calendar; audit log</span></label>
                  <label class="flex items-start gap-3"><input type="checkbox" class="mt-1" data-id="enterprise-slos"/> <span>SLOs for availability, latency, data quality; error budgets</span></label>
                  <details class="mt-3"><summary class="font-semibold">Newbie guide: Getting access right</summary>
                    <div class="mt-2 text-sm text-gray-700 space-y-2">
                      <p><strong>Story mode:</strong> You will integrate Okta (or your IdP), set roles (who can view/edit/release), and turn on SCIM so users are added/removed automatically. You will also set up a small approval flow so risky changes need a second person’s OK.</p>
                      <p><strong>SSO:</strong> one login to rule them all. Users sign in with your identity provider (Okta/Microsoft). RBAC makes sure only the right people can edit automations.</p>
                      <p><strong>Approvals:</strong> risky changes need a second person to approve. This catches mistakes before users see them.</p>
                    </div>
                  </details>
                </div>

                <div class="border rounded-xl p-4">
                  <p class="font-semibold mb-2">Step 2 — Data & Safety</p>
                  <label class="flex items-start gap-3 mb-2"><input type="checkbox" class="mt-1" data-id="enterprise-warehouse"/> <span>Warehouse sync (Snowflake/BigQuery) + lineage</span></label>
                  <label class="flex items-start gap-3 mb-2"><input type="checkbox" class="mt-1" data-id="enterprise-dlp"/> <span>DLP rules; PII redaction; retention schedules</span></label>
                  <label class="flex items-start gap-3"><input type="checkbox" class="mt-1" data-id="enterprise-private-ai"/> <span>Private AI endpoints (Azure OpenAI) for copy assist</span></label>
                  <details class="mt-3"><summary class="font-semibold">Newbie guide: Keep data clean and safe</summary>
                    <div class="mt-2 text-sm text-gray-700 space-y-2">
                      <p><strong>Story mode:</strong> You will connect the CRM to your warehouse, add simple labels that show where data came from (lineage), and turn on rules that block sensitive info from logs or prompts. You’ll also set automatic deletion windows for personal data.</p>
                      <ul class="list-disc list-inside space-y-1">
                        <li><strong>Lineage:</strong> keep a “came from” trail for each record so audits are easy.</li>
                        <li><strong>DLP:</strong> block sensitive fields (SSN, credit card) from entering logs or prompts.</li>
                        <li><strong>Retention:</strong> auto‑delete personal data after an agreed period unless needed.</li>
                      </ul>
                    </div>
                  </details>
                </div>

                <div class="border rounded-xl p-4">
                  <p class="font-semibold mb-2">Step 3 — Observability & Scale</p>
                  <label class="flex items-start gap-3 mb-2"><input type="checkbox" class="mt-1" data-id="enterprise-logs"/> <span>Logs, traces, cost dashboards; alerting policies</span></label>
                  <label class="flex items-start gap-3 mb-2"><input type="checkbox" class="mt-1" data-id="enterprise-flags"/> <span>Feature flags; canary rollout 5%→25%→100%</span></label>
                  <label class="flex items-start gap-3"><input type="checkbox" class="mt-1" data-id="enterprise-scale"/> <span>Load testing; rate‑limit strategy; backpressure</span></label>
                  <details class="mt-3"><summary class="font-semibold">Newbie guide: See problems before users do</summary>
                    <div class="mt-2 text-sm text-gray-700 space-y-2">
                      <p><strong>Story mode:</strong> You will connect logging and tracing, add a few key alerts (error rate, latency, cost spikes), and test that they page the on‑call person. You will also set limits so the system slows down gracefully if downstream tools are overwhelmed.</p>
                      <p><strong>Logs</strong> tell you what happened, <strong>traces</strong> tell you where time went, and <strong>metrics</strong> show trends. Alerts ping a human when thresholds are crossed.</p>
                      <p><strong>Backpressure:</strong> if tools are overloaded, slow down safely instead of failing.</p>
                    </div>
                  </details>
                </div>

                <div class="border rounded-xl p-4">
                  <p class="font-semibold mb-2">Step 4 — UAT & Run</p>
                  <label class="flex items-start gap-3 mb-2"><input type="checkbox" class="mt-1" data-id="enterprise-uat"/> <span>Multi‑env UAT; rollback drills; release notes</span></label>
                  <label class="flex items-start gap-3 mb-2"><input type="checkbox" class="mt-1" data-id="enterprise-oncall"/> <span>On‑call runbooks; paging; incident templates</span></label>
                  <label class="flex items-start gap-3"><input type="checkbox" class="mt-1" data-id="enterprise-reviews"/> <span>Monthly evals; quarterly red‑team; exec dashboard</span></label>
                  <details class="mt-3"><summary class="font-semibold">Newbie guide: Practicing rollbacks</summary>
                    <div class="mt-2 text-sm text-gray-700 space-y-2">
                      <p><strong>Story mode:</strong> You will pick an easy change, ship it behind a flag to 5%, and then flip the rollback switch to prove you can undo it fast. You’ll write short release notes and an incident template so everyone knows what changed and how to fix it if needed.</p>
                      <p>Pick a small, reversible change and practice rolling it out and back. Time how long rollback takes. If it’s slow, simplify the process.</p>
                      <ul class="list-disc list-inside space-y-1">
                        <li>Keep a one‑page incident template: what happened, impact, fix, prevention.</li>
                        <li>After launch, monitor SLOs for 24 hours before calling it “done”.</li>
                      </ul>
                    </div>
                  </details>
                </div>
              </div>

              <div class="mt-6 flex items-center gap-3">
                <button id="enterprise-reset" class="text-sm px-3 py-2 rounded-lg border hover:bg-gray-50" aria-label="Reset checklist">Reset checklist</button>
                <span class="text-xs text-gray-500">Saved locally in this browser.</span>
              </div>
            </div>
          </section>

          <section class="sec" id="enterprise-phases">
            <h3 class="text-xl font-bold mb-3">🧭 Delivery Phases</h3>
            <div class="bg-white border rounded-2xl overflow-hidden text-sm">
              <table class="min-w-full"><thead class="bg-gray-50 text-gray-600"><tr><th class="p-3 text-left">Phase</th><th class="p-3 text-left">Focus</th><th class="p-3 text-left">Key Tasks</th><th class="p-3 text-left">Exit</th></tr></thead>
                <tbody class="divide-y">
                  <tr><td class="p-3 font-semibold">Discovery</td><td class="p-3">Governance</td><td class="p-3">SLOs, identity, approvals</td><td class="p-3">Signed charter</td></tr>
                  <tr><td class="p-3 font-semibold">Build</td><td class="p-3">Platform</td><td class="p-3">SSO/RBAC, warehouse, flags, dashboards</td><td class="p-3">Stage demo</td></tr>
                  <tr><td class="p-3 font-semibold">Test</td><td class="p-3">UAT</td><td class="p-3">Canary plan; rollback; load test</td><td class="p-3">Sign‑off</td></tr>
                  <tr><td class="p-3 font-semibold">Launch</td><td class="p-3">SLOs</td><td class="p-3">5%→25%→100%; on‑call</td><td class="p-3">SLO met 24h</td></tr>
                  <tr><td class="p-3 font-semibold">Run</td><td class="p-3">Ops</td><td class="p-3">Incident mgmt; audits; cost</td><td class="p-3">Quarterly pack</td></tr>
                </tbody>
              </table>
            </div>
          </section>

          <section class="sec" id="enterprise-scope">
            <h3 class="text-xl font-bold mb-3">📦 Scope & Inclusions</h3>
            <ul class="bg-white border rounded-2xl p-6 space-y-2 text-sm">
              <li>All Enhanced + SSO/RBAC, audit, change governance</li>
              <li>Private AI endpoints; warehouse sync; observability</li>
              <li>Release management; canary; rollback drills</li>
            </ul>
          </section>

          <section class="sec" id="enterprise-kpis">
            <h3 class="text-xl font-bold mb-3">📈 KPIs & Reporting</h3>
            <div class="bg-white border rounded-2xl overflow-hidden text-sm">
              <table class="min-w-full"><thead class="bg-gray-50 text-gray-600"><tr><th class="p-3 text-left">Metric</th><th class="p-3 text-left">Target</th><th class="p-3 text-left">Notes</th></tr></thead>
                <tbody class="divide-y">
                  <tr><td class="p-3">Availability SLO</td><td class="p-3">≥ 99.9%</td><td class="p-3">Core workflows</td></tr>
                  <tr><td class="p-3">Sync Latency</td><td class="p-3">P95 ≤ target</td><td class="p-3">CRM↔warehouse/tools</td></tr>
                  <tr><td class="p-3">Data Quality</td><td class="p-3">≥ 98%</td><td class="p-3">Dedupe/field validity</td></tr>
                </tbody>
              </table>
            </div>
            <p class="mt-2 text-xs text-gray-500">Track cost per lead processed, change failure rate, and incident MTTR with post‑incident RCAs.</p>
          </section>

          <section class="sec" id="enterprise-glossary">
            <h3 class="text-xl font-bold mb-3">📚 Glossary (Newbie‑friendly)</h3>
            <div class="bg-white border rounded-2xl p-6 text-sm space-y-2">
              <p><strong>RBAC</strong>: Role‑based access control for admin actions.</p>
              <p><strong>DLP</strong>: Rules that prevent sensitive data leakage.</p>
              <p><strong>Error budget</strong>: Allowed failure within SLOs before freezes.</p>
            </div>
          </section>

          <div class="border-t pt-10">
            <h3 class="text-2xl font-bold">🧰 Part 2: Implementer’s Guide</h3>
            <p class="mt-2 text-gray-600 text-sm">Procedures for Enterprise with change control.</p>
          </div>

          <section class="sec" id="enterprise-initial-setup">
            <h3 class="text-xl font-bold mb-3">🛠️ Initial Setup (SOP)</h3>
            <ul class="bg-white border rounded-2xl p-6 space-y-2 text-sm">
              <li>Envs (dev/stage/prod); approvals; secrets; cost guardrails.</li>
              <li>Feature flags; release calendar; ownership map; audit log.</li>
            </ul>
          </section>

          <section class="sec" id="enterprise-prereqs">
            <h3 class="text-xl font-bold mb-3">🔑 Access & Prereqs</h3>
            <ul class="bg-white border rounded-2xl p-6 space-y-2 text-sm">
              <li>SSO integration details; RBAC matrix; data source credentials.</li>
              <li>Warehouse access; logging/tracing endpoints.</li>
            </ul>
          </section>

          <section class="sec" id="enterprise-tooling">
            <h3 class="text-xl font-bold mb-3">🔧 Tooling Options</h3>
            <div class="bg-white border rounded-2xl overflow-hidden text-sm">
              <table class="min-w-full"><thead class="bg-gray-50 text-gray-600"><tr><th class="p-3 text-left">Category</th><th class="p-3 text-left">Options</th><th class="p-3 text-left">Notes</th></tr></thead>
                <tbody class="divide-y">
                  <tr><td class="p-3 font-semibold">Identity</td><td class="p-3">Okta (SAML/OIDC), SCIM</td><td class="p-3">RBAC + audit</td></tr>
                  <tr><td class="p-3 font-semibold">iPaaS</td><td class="p-3">MuleSoft, Workato Ent.</td><td class="p-3">Scale + governance</td></tr>
                  <tr><td class="p-3 font-semibold">AI</td><td class="p-3">Azure OpenAI private</td><td class="p-3">Guardrails + approvals</td></tr>
                  <tr><td class="p-3 font-semibold">Warehouse</td><td class="p-3">Snowflake, BigQuery</td><td class="p-3">Sync + BI feeds</td></tr>
                  <tr><td class="p-3 font-semibold">Observability</td><td class="p-3">Logs/traces/cost</td><td class="p-3">Dashboards + alerts</td></tr>
                </tbody>
              </table>
            </div>
          </section>

          <section class="sec" id="enterprise-design">
            <h3 class="text-xl font-bold mb-3">💡 Design Notes</h3>
            <div class="bg-white border rounded-2xl p-6 space-y-2 text-sm">
              <ul class="list-disc list-inside space-y-1">
                <li>Flags for prompts/templates; reversible configs; audit every change.</li>
                <li>Canary by segment; auto‑rollback on thresholds.</li>
                <li>Data contracts for sync; unit tests on transforms.</li>
              </ul>
            </div>
          </section>

          <section class="sec" id="enterprise-security">
            <h3 class="text-xl font-bold mb-3">🛡️ Security & Compliance</h3>
            <div class="bg-white border rounded-2xl p-6 space-y-2 text-sm">
              <ul class="list-disc list-inside space-y-1">
                <li>Compliance mapping (SOC2/GDPR); encryption in transit/at rest.</li>
                <li>Incident response: runbooks, RTO/RPO targets, post‑incident RCAs.</li>
                <li>Data governance: classification, retention schedules, approval gates.</li>
              </ul>
            </div>
          </section>

          <section class="sec" id="enterprise-timeline">
            <h3 class="text-xl font-bold mb-3">🗓️ Detailed Timeline</h3>
            <div class="bg-white border rounded-2xl overflow-hidden text-sm">
              <table class="min-w-full"><thead class="bg-gray-50 text-gray-600"><tr><th class="p-3 text-left">Week(s)</th><th class="p-3 text-left">Focus</th><th class="p-3 text-left">Key Tasks</th><th class="p-3 text-left">Exit Criteria</th></tr></thead>
                <tbody class="divide-y">
                  <tr><td class="p-3">1–2</td><td class="p-3">Discovery & Design</td><td class="p-3">SLOs, identity, governance; warehouse plan; design spec</td><td class="p-3">Approved charter + rollout plan</td></tr>
                  <tr><td class="p-3">3–5</td><td class="p-3">Build & Observability</td><td class="p-3">SSO/RBAC; flags; logs/traces/cost dashboards; warehouse sync</td><td class="p-3">Stage demo; dashboards green</td></tr>
                  <tr><td class="p-3">6–7</td><td class="p-3">Test & UAT</td><td class="p-3">UAT; load tests; rollback drills; data quality checks</td><td class="p-3">Sign‑off; error budget respected</td></tr>
                  <tr><td class="p-3">8</td><td class="p-3">Launch & SLOs</td><td class="p-3">Canary 5%→25%→100%; on‑call; incident runbook ready</td><td class="p-3">SLOs met 24h; no critical incidents</td></tr>
                </tbody>
              </table>
            </div>
          </section>

          <section class="sec" id="enterprise-templates">
            <h3 class="text-xl font-bold mb-3">🧩 Templates & Snippets</h3>
            <div class="bg-white border rounded-2xl p-6 text-sm">
<pre class="whitespace-pre-wrap text-xs">Release checklist:
- Change ticket approved
- Feature flag staged
- Rollout plan + rollback plan
- Observability checks green
</pre>
<pre class="whitespace-pre-wrap text-xs">Canary example (conceptual):
flag: sequences_v3
stages:
  - percentage: 5
    duration: 2h
  - percentage: 25
    duration: 6h
  - percentage: 100
    conditions: ["error_rate &lt; 2%", "p95_sync_latency &lt; target"]
</pre>
            </div>
          </section>

          <section class="sec" id="enterprise-audit-monitoring">
            <h3 class="text-xl font-bold mb-3">🔍 Audit & Monitoring</h3>
            <div class="bg-white border rounded-2xl p-6 text-sm space-y-2">
              <ul class="list-disc list-inside space-y-1">
                <li>Quarterly audit packs; evidence archive; change logs.</li>
                <li>Operational reviews: SLO trends, cost per lead, error budgets.</li>
                <li>Security reviews: dependency updates, secrets rotation, red‑team findings.</li>
              </ul>
            </div>
          </section>
        </section>
      </div>
    </div>
  </main>

  <script>
  (function(){
    const boxes = document.querySelectorAll('#core-checklist input[type="checkbox"][data-id]');
    const bar = document.getElementById('core-progress-bar');
    const txt = document.getElementById('core-progress-text');
    const slug = (location.pathname.split('/').pop() || '').replace(/\.html$/, '');
    const KEY = (id) => `aflp:${slug}:check:${id}`;
    function update(){ const t=boxes.length||1, d=[...boxes].filter(b=>b.checked).length, p=Math.round((d/t)*100); if(bar){bar.style.width=p+'%'; bar.setAttribute('aria-valuenow', String(p));} if(txt){txt.textContent=p+'% complete';} }
    function load(){ boxes.forEach(b=>{ try{ b.checked = localStorage.getItem(KEY(b.dataset.id))==='1'; }catch(e){} }); update(); }
    function onChange(e){ const id=e.target?.dataset?.id; if(!id) return; try{ localStorage.setItem(KEY(id), e.target.checked?'1':'0'); }catch(e){} update(); }
    boxes.forEach(b=>b.addEventListener('change', onChange));
    const reset=document.getElementById('core-reset'); if(reset){ reset.addEventListener('click', ()=>{ boxes.forEach(b=>{ try{ localStorage.removeItem(KEY(b.dataset.id)); }catch(e){} b.checked=false; }); update(); }); }
    if(document.readyState==='loading') document.addEventListener('DOMContentLoaded', load); else load();
  })();
  </script>

  <script>
  (function(){
    const toc = document.getElementById('toc'); if(!toc) return;
    const links = Array.from(toc.querySelectorAll('a[href^="#"]'));
    const ids = links.map(a => a.getAttribute('href').slice(1));
    const sections = ids.map(id => document.getElementById(id)).filter(Boolean);
    const byId = Object.fromEntries(links.map(a => [a.getAttribute('href').slice(1), a]));
    const OFFSET = 140;
    function clear(){ links.forEach(a=>a.classList.remove('active')); }
    function setActive(id){ const a=byId[id]; if(!a) return; clear(); a.classList.add('active'); const d=a.closest('details'); if(d) d.open=true; }
    let ticking=false; function update(){ const y=window.scrollY+OFFSET; let cur=ids[0]||''; for(let i=0;i<sections.length;i++){ const s=sections[i]; if(s && s.offsetTop<=y) cur=s.id; else break;} if(cur) setActive(cur);} 
    function onScroll(){ if(ticking) return; ticking=true; requestAnimationFrame(()=>{ update(); ticking=false; }); }
    window.addEventListener('scroll', onScroll, {passive:true}); window.addEventListener('resize', onScroll);
    if(document.readyState==='loading') document.addEventListener('DOMContentLoaded', update); else update();
    window.addEventListener('hashchange', ()=>{ const id=location.hash.replace('#',''); if(id) setActive(id); });
    links.forEach(a=>a.addEventListener('click', ()=>{ const id=a.getAttribute('href').slice(1); setActive(id); }));
  })();
  </script>

  <script>
  (function(){
    const boxes = document.querySelectorAll('#enhanced-checklist input[type="checkbox"][data-id]');
    const bar = document.getElementById('enhanced-progress-bar');
    const txt = document.getElementById('enhanced-progress-text');
    const slug = (location.pathname.split('/').pop() || '').replace(/\.html$/, '');
    const KEY = (id) => `aflp:${slug}:check:${id}`;
    function update(){ const t=boxes.length||1, d=[...boxes].filter(b=>b.checked).length, p=Math.round((d/t)*100); if(bar){bar.style.width=p+'%'; bar.setAttribute('aria-valuenow', String(p));} if(txt){txt.textContent=p+'% complete';} }
    function load(){ boxes.forEach(b=>{ try{ b.checked = localStorage.getItem(KEY(b.dataset.id))==='1'; }catch(e){} }); update(); }
    function onChange(e){ const id=e.target?.dataset?.id; if(!id) return; try{ localStorage.setItem(KEY(id), e.target.checked?'1':'0'); }catch(e){} update(); }
    boxes.forEach(b=>b.addEventListener('change', onChange));
    const reset=document.getElementById('enhanced-reset'); if(reset){ reset.addEventListener('click', ()=>{ boxes.forEach(b=>{ try{ localStorage.removeItem(KEY(b.dataset.id)); }catch(e){} b.checked=false; }); update(); }); }
    if(document.readyState==='loading') document.addEventListener('DOMContentLoaded', load); else load();
  })();
  </script>

  <script>
  (function(){
    const boxes = document.querySelectorAll('#enterprise-checklist input[type="checkbox"][data-id]');
    const bar = document.getElementById('enterprise-progress-bar');
    const txt = document.getElementById('enterprise-progress-text');
    const slug = (location.pathname.split('/').pop() || '').replace(/\.html$/, '');
    const KEY = (id) => `aflp:${slug}:check:${id}`;
    function update(){ const t=boxes.length||1, d=[...boxes].filter(b=>b.checked).length, p=Math.round((d/t)*100); if(bar){bar.style.width=p+'%'; bar.setAttribute('aria-valuenow', String(p));} if(txt){txt.textContent=p+'% complete';} }
    function load(){ boxes.forEach(b=>{ try{ b.checked = localStorage.getItem(KEY(b.dataset.id))==='1'; }catch(e){} }); update(); }
    function onChange(e){ const id=e.target?.dataset?.id; if(!id) return; try{ localStorage.setItem(KEY(id), e.target.checked?'1':'0'); }catch(e){} update(); }
    boxes.forEach(b=>b.addEventListener('change', onChange));
    const reset=document.getElementById('enterprise-reset'); if(reset){ reset.addEventListener('click', ()=>{ boxes.forEach(b=>{ try{ localStorage.removeItem(KEY(b.dataset.id)); }catch(e){} b.checked=false; }); update(); }); }
    if(document.readyState==='loading') document.addEventListener('DOMContentLoaded', load); else load();
  })();
  </script>

</body>
</html>
